const a2_0x3ed2=['@nrwl/workspace/src/utilities/output','assign','stringify','NUMBER_OF_TRIES','/nx-cloud/runs/end','unknown','throw','message','Invalid\x20end\x20run\x20response:\x20','messages','data','urls','status','Stack\x20Trace:','headers','api','runUrl','extractErrorMessage','zlib','__esModule','createApiAxiosInstance','gzip','toString','next','machineInfo','defaults','getBranch','parse','stack','post','success','Invalid\x20Nx\x20Cloud\x20response:\x20','nxCloudVersion','note','string','package.json','Nx\x20Cloud:\x20Unknown\x20Error\x20Occurred','axiosException','apply','then','value','Run\x20Details:','VERBOSE_LOGGING','../../../utilities/axios','devDependencies','runContext','apiError','startRun','util','output','apiAxiosInstance','Invalid\x20end\x20run\x20response','axiosMultipleTries','__awaiter'];(function(_0x334f18,_0x3ed2ec){const _0x2c7d46=function(_0x28c9b4){while(--_0x28c9b4){_0x334f18['push'](_0x334f18['shift']());}};_0x2c7d46(++_0x3ed2ec);}(a2_0x3ed2,0x13b));const a2_0x2c7d=function(_0x334f18,_0x3ed2ec){_0x334f18=_0x334f18-0x0;let _0x2c7d46=a2_0x3ed2[_0x334f18];return _0x2c7d46;};'use strict';var __awaiter=this&&this[a2_0x2c7d('0x8')]||function(_0x29e1b0,_0x3e9832,_0xc07251,_0x4ef966){function _0x2ccb3f(_0x1a7463){return _0x1a7463 instanceof _0xc07251?_0x1a7463:new _0xc07251(function(_0x18f567){_0x18f567(_0x1a7463);});}return new(_0xc07251||(_0xc07251=Promise))(function(_0x4f77,_0x3d167b){function _0x567a66(_0x53bc03){try{_0x30be02(_0x4ef966[a2_0x2c7d('0x20')](_0x53bc03));}catch(_0x3ee3f5){_0x3d167b(_0x3ee3f5);}}function _0x166312(_0x1e4926){try{_0x30be02(_0x4ef966[a2_0x2c7d('0xf')](_0x1e4926));}catch(_0x4e10e4){_0x3d167b(_0x4e10e4);}}function _0x30be02(_0x2154b8){_0x2154b8['done']?_0x4f77(_0x2154b8[a2_0x2c7d('0x31')]):_0x2ccb3f(_0x2154b8[a2_0x2c7d('0x31')])[a2_0x2c7d('0x30')](_0x567a66,_0x166312);}_0x30be02((_0x4ef966=_0x4ef966[a2_0x2c7d('0x2f')](_0x29e1b0,_0x3e9832||[]))[a2_0x2c7d('0x20')]());});};Object['defineProperty'](exports,a2_0x2c7d('0x1c'),{'value':!![]});exports['CloudRunApi']=void 0x0;const output_1=require(a2_0x2c7d('0x9'));const axios_1=require(a2_0x2c7d('0x34'));const environment_1=require('../../../utilities/environment');const fs_1=require('fs');const zlib_1=require(a2_0x2c7d('0x1b'));const util_1=require(a2_0x2c7d('0x3'));class CloudRunApi{constructor(_0x1ee639,_0x5ba98f,_0x1c1d91,_0xcb5080){this['messages']=_0x1ee639;this[a2_0x2c7d('0x0')]=_0x5ba98f;this[a2_0x2c7d('0x21')]=_0xcb5080;this['apiAxiosInstance']=axios_1[a2_0x2c7d('0x1d')](_0x1c1d91);}[a2_0x2c7d('0x2')](_0x3f373a,_0x61800d){return __awaiter(this,void 0x0,void 0x0,function*(){try{const _0x11d902=yield axios_1[a2_0x2c7d('0x7')](()=>this['apiAxiosInstance'][a2_0x2c7d('0x26')]('/nx-cloud/runs/start',{'meta':{'nxCloudVersion':this[a2_0x2c7d('0x29')]()},'branch':environment_1[a2_0x2c7d('0x23')](),'runGroup':environment_1['getRunGroup'](),'distributedExecutionId':_0x3f373a,'hashes':_0x61800d}),environment_1[a2_0x2c7d('0xc')]);if(_0x11d902[a2_0x2c7d('0x13')]&&_0x11d902[a2_0x2c7d('0x13')][a2_0x2c7d('0x10')]){this[a2_0x2c7d('0x12')]['message']=_0x11d902[a2_0x2c7d('0x13')][a2_0x2c7d('0x10')];}if(!_0x11d902['data']||!_0x11d902[a2_0x2c7d('0x13')][a2_0x2c7d('0x14')]){this[a2_0x2c7d('0x12')]['apiError']=a2_0x2c7d('0x28')+JSON[a2_0x2c7d('0xb')](_0x11d902[a2_0x2c7d('0x13')]);return{};}return _0x11d902[a2_0x2c7d('0x13')][a2_0x2c7d('0x14')];}catch(_0x39389a){this['messages'][a2_0x2c7d('0x1')]=this[a2_0x2c7d('0x12')][a2_0x2c7d('0x1a')](_0x39389a,'api');return{};}});}['endRun'](_0x4ae4de,_0x4f9328){return __awaiter(this,void 0x0,void 0x0,function*(){try{if(this[a2_0x2c7d('0x12')][a2_0x2c7d('0x1')])return![];const _0x4ace76={'meta':{'nxCloudVersion':this['nxCloudVersion']()},'tasks':_0x4f9328,'run':_0x4ae4de,'machineInfo':this['machineInfo']};const _0x568bf9=Buffer['from'](JSON['stringify'](_0x4ace76));const _0x4836cf=yield util_1['promisify'](zlib_1[a2_0x2c7d('0x1e')])(_0x568bf9);const _0x5a2dcc=yield axios_1[a2_0x2c7d('0x7')](()=>this[a2_0x2c7d('0x5')]['post'](a2_0x2c7d('0xd'),_0x4836cf,{'headers':Object[a2_0x2c7d('0xa')](Object[a2_0x2c7d('0xa')]({},this[a2_0x2c7d('0x5')][a2_0x2c7d('0x22')][a2_0x2c7d('0x17')]),{'Content-Encoding':a2_0x2c7d('0x1e'),'Content-Type':'application/octet-stream'})}),environment_1[a2_0x2c7d('0xc')]);if(_0x5a2dcc){if(_0x5a2dcc[a2_0x2c7d('0x13')]&&_0x5a2dcc[a2_0x2c7d('0x13')]['runUrl']&&_0x5a2dcc[a2_0x2c7d('0x13')][a2_0x2c7d('0x15')]===a2_0x2c7d('0x27')){this[a2_0x2c7d('0x0')]['runUrl']=_0x5a2dcc['data'][a2_0x2c7d('0x19')];return!![];}if(_0x5a2dcc['data']&&_0x5a2dcc[a2_0x2c7d('0x13')][a2_0x2c7d('0x15')]){this['messages'][a2_0x2c7d('0x1')]='Invalid\x20end\x20run\x20response:\x20'+JSON[a2_0x2c7d('0xb')](_0x5a2dcc[a2_0x2c7d('0x13')][a2_0x2c7d('0x10')]);}else if(_0x5a2dcc[a2_0x2c7d('0x13')]&&typeof _0x5a2dcc['data']===a2_0x2c7d('0x2b')){if(_0x5a2dcc[a2_0x2c7d('0x13')]!==a2_0x2c7d('0x27')){this['messages'][a2_0x2c7d('0x1')]=a2_0x2c7d('0x11')+JSON[a2_0x2c7d('0xb')](_0x5a2dcc['data']);}}else{this[a2_0x2c7d('0x12')]['apiError']=a2_0x2c7d('0x11')+JSON[a2_0x2c7d('0xb')](_0x5a2dcc[a2_0x2c7d('0x13')]);}if(environment_1[a2_0x2c7d('0x33')]){output_1[a2_0x2c7d('0x4')][a2_0x2c7d('0x2a')]({'title':a2_0x2c7d('0x6'),'bodyLines':[JSON[a2_0x2c7d('0xb')](_0x5a2dcc[a2_0x2c7d('0x13')],null,0x2)]});}}else{output_1[a2_0x2c7d('0x4')]['error']({'title':a2_0x2c7d('0x2d'),'bodyLines':['Run\x20completion\x20responded\x20with\x20`undefined`.',a2_0x2c7d('0x32'),JSON[a2_0x2c7d('0xb')](_0x4ae4de,null,0x2),a2_0x2c7d('0x16'),JSON[a2_0x2c7d('0xb')](new Error()[a2_0x2c7d('0x25')],null,0x2)]});}return![];}catch(_0x2fc021){const _0x399a32=_0x2fc021[a2_0x2c7d('0x2e')];this[a2_0x2c7d('0x12')][a2_0x2c7d('0x1')]=this[a2_0x2c7d('0x12')][a2_0x2c7d('0x1a')](_0x399a32,a2_0x2c7d('0x18'));return![];}});}[a2_0x2c7d('0x29')](){try{const _0x44bf2f=JSON[a2_0x2c7d('0x24')](fs_1['readFileSync'](a2_0x2c7d('0x2c'))[a2_0x2c7d('0x1f')]());return _0x44bf2f[a2_0x2c7d('0x35')]['@nrwl/nx-cloud'];}catch(_0x1dcf8d){return a2_0x2c7d('0xe');}}}exports['CloudRunApi']=CloudRunApi;